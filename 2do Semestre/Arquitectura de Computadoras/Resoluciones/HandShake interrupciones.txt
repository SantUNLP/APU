EOI EQU 20H
IMR EQU 21H
INT2 EQU 26H
ESTADO EQU 41H
DATO EQU 40H

ORG 20
DIR DW 3000H

ORG 3000H 
DEC LONG
CMP LONG, 0
JS FIN
MOV AL, [BX]
OUT DATO, AL
INC BX
SEGUIR: MOV AL, EOI
OUT EOI, AL
IRET

ORG 1000H
MSJ DB "HOLA"
LONG DB 4

ORG 2000H
CLI
IN AL, ESTADO
OR AL, 10000000B
OUT ESTADO, AL
; Configuro HandShake por interrupciones
MOV AL, 11111011B
OUT IMR, AL
MOV AL, 5
OUT INT2, AL
MOV BX, OFFSET MSJ
; Configuro el PIC
STI

FIN: JMP FIN
INT 0
END
